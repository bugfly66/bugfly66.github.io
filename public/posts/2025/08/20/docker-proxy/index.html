<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Docker proxy | Bugfly66&#39;s Blog</title>
    <link rel="stylesheet" href="/css/style.css" />
    <link rel="stylesheet" href="/css/fonts.css" />
    

  </head>

  <body>
    <nav>
    <ul class="menu">
      
      <li><a href="/">Home</a></li>
      
      <li><a href="/about/">About</a></li>
      
      <li><a href="/categories/">Categories</a></li>
      
      <li><a href="/tags/">Tags</a></li>
      
      <li><a href="/index.xml">Subscribe</a></li>
      
    </ul>
    <hr/>
    </nav>

<div class="article-meta">
<h1><span class="title">Docker proxy</span></h1>

<h2 class="date">2025/08/20</h2>
</div>

<main>
<blockquote>
<p>å†…å®¹æ¥è‡ªChatGPT</p></blockquote>
<p>å¥½ ğŸ‘ å¦‚æœè¦è®© <strong>Docker å…¨å±€èµ°ä»£ç†</strong>ï¼Œè¦ç»™ <strong>Docker Daemon é…ç½®ä»£ç†</strong>ã€‚ä¸€èˆ¬åˆ†ä¸¤æ­¥ï¼š</p>
<hr>
<h2 id="-1-åˆ›å»ºä»£ç†é…ç½®æ–‡ä»¶">ğŸ”§ 1. åˆ›å»ºä»£ç†é…ç½®æ–‡ä»¶</h2>
<p>é¦–å…ˆæ–°å»ºç›®å½•ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo mkdir -p /etc/systemd/system/docker.service.d
</span></span></code></pre></div><p>ç„¶ååˆ›å»ºé…ç½®æ–‡ä»¶ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo nano /etc/systemd/system/docker.service.d/http-proxy.conf
</span></span></code></pre></div><p>å†™å…¥å†…å®¹ï¼ˆå‡è®¾ä»£ç†æ˜¯ <code>127.0.0.1:7890</code>ï¼Œæ”¹æˆä½ è‡ªå·±çš„ï¼‰ï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#66d9ef">[Service]</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;HTTP_PROXY=http://127.0.0.1:7890&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;HTTPS_PROXY=http://127.0.0.1:7890&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;NO_PROXY=localhost,127.0.0.1,docker-registry.somecorporation.com&#34;</span>
</span></span></code></pre></div><hr>
<h2 id="-2-è®©é…ç½®ç”Ÿæ•ˆ">ğŸ”§ 2. è®©é…ç½®ç”Ÿæ•ˆ</h2>
<p>ä¿å­˜åæ‰§è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>sudo systemctl daemon-reexec
</span></span><span style="display:flex;"><span>sudo systemctl daemon-reload
</span></span><span style="display:flex;"><span>sudo systemctl restart docker
</span></span></code></pre></div><hr>
<h2 id="-3-éªŒè¯">ğŸ”§ 3. éªŒè¯</h2>
<p>æ‰§è¡Œï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>systemctl show --property<span style="color:#f92672">=</span>Environment docker
</span></span></code></pre></div><p>å¦‚æœèƒ½çœ‹åˆ°åˆšæ‰è®¾ç½®çš„ <code>HTTP_PROXY</code> å’Œ <code>HTTPS_PROXY</code>ï¼Œè¯´æ˜ç”Ÿæ•ˆäº†ã€‚</p>
<hr>
<h2 id="-4-æ³¨æ„äº‹é¡¹">ğŸ”§ 4. æ³¨æ„äº‹é¡¹</h2>
<ul>
<li>
<p>å¦‚æœä½ ç”¨çš„æ˜¯ <strong>Clash / V2Ray / Surge ç­‰å®¢æˆ·ç«¯</strong>ï¼Œæœ¬åœ°ä»£ç†é€šå¸¸æ˜¯ <code>127.0.0.1:7890</code>ï¼ˆhttpï¼‰ï¼Œå¦‚æœæ˜¯ socks5ï¼Œéœ€è¦å†™æˆï¼š</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-ini" data-lang="ini"><span style="display:flex;"><span><span style="color:#a6e22e">Environment</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;HTTP_PROXY=socks5://127.0.0.1:7890&#34;</span>
</span></span></code></pre></div></li>
<li>
<p><code>NO_PROXY</code> å¾ˆé‡è¦ï¼Œå¦åˆ™è¿ <code>localhost</code> ä¹Ÿä¼šèµ°ä»£ç†ï¼Œå¯èƒ½å¯¼è‡´å®¹å™¨è®¿é—®å®¿ä¸»æœºæ—¶å‡ºé—®é¢˜ã€‚</p>
</li>
</ul>

</main>

  <footer>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/katex/dist/katex.min.css">
<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/math-code.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/katex/dist/katex.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/katex/dist/contrib/auto-render.min.js" defer></script>
<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/render-katex.js" defer></script>

<script src="//cdn.jsdelivr.net/npm/@xiee/utils/js/center-img.min.js" defer></script>

  
  <hr/>
  Â© <a href="https://blog.delicacy.top">bugfly66</a> 2025 &ndash; 2025 | <a href="https://github.com/bugfly66">Github</a> | <a href="mailto:bugfly66">Email</a>
  
  </footer>
  </body>
</html>

